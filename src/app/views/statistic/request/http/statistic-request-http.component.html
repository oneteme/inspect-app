<div style="display: flex;flex-direction: column;gap: 20px;">
    <div class="mat-elevation-z5" style="display: flex; align-items: stretch; gap: 10px;">
        <repartition-type-card style="width: 70%; display: flex; flex-direction: column;" [seriesProvider]="seriesProvider" [data]="$timeAndTypeResponse.data" [isLoading]="$timeAndTypeResponse.loading" [group]="params?.optional.group">
            <div class="stat" style="color: #33cc33;">
                <div class="label" [matTooltip]="($timeAndTypeResponse.stats.statCountOk | number : '1.0-0') + ' / ' + ($timeAndTypeResponse.stats.statCount | number : '1.0-0')">{{ ($timeAndTypeResponse.stats.statCountOk / $timeAndTypeResponse.stats.statCount) * 100 | number : '1.0-2'  }}%</div>
                <div class="sub-label">2xx</div>
            </div>
            <div class="stat" style="color: #ffa31a">
                <div class="label" [matTooltip]="($timeAndTypeResponse.stats.statCountErrClient | number : '1.0-0') + ' / ' + ($timeAndTypeResponse.stats.statCount | number : '1.0-0')">{{ ($timeAndTypeResponse.stats.statCountErrClient / $timeAndTypeResponse.stats.statCount) * 100 | number : '1.0-2'  }}%</div>
                <div class="sub-label">4xx</div>
            </div>
            <div class="stat" style="color: #ff0000">
                <div class="label" [matTooltip]="($timeAndTypeResponse.stats.statCountErrorServer | number : '1.0-0') + ' / ' + ($timeAndTypeResponse.stats.statCount | number : '1.0-0')">{{ ($timeAndTypeResponse.stats.statCountErrorServer / $timeAndTypeResponse.stats.statCount) * 100 | number : '1.0-2' }}%</div>
                <div class="sub-label">5xx</div>
            </div>
            <div class="stat" style="color: gray">
                <div class="label" [matTooltip]="($timeAndTypeResponse.stats.statCountUnavailableServer | number : '1.0-0') + ' / ' + ($timeAndTypeResponse.stats.statCount | number : '1.0-0')">{{ ($timeAndTypeResponse.stats.statCountUnavailableServer / $timeAndTypeResponse.stats.statCount) * 100 | number : '1.0-2' }}%</div>
                <div class="sub-label">0</div>
            </div>
        </repartition-type-card>
        <mat-divider vertical ></mat-divider>
        <repartition-cross-table style="width: 30%; display: flex; flex-direction: column;"
                                 [data]="$timeAndTypeResponseCross.data"
                                 [isLoading]="$timeAndTypeResponseCross.loading"
                                 [columns]="[
                                        { field:  params?.optional?.group, header: 'Nom'},
                                        { field: 'name', header: 'Name' }
                                     ]"
                                 [segments]="[
                                        { field: 'countSuccess', label: '2xx', color: '#33cc33' },
                                        { field: 'countErrorClient', label: '4xx', color: '#ffa31a' },
                                        { field: 'countErrorServer', label: '5xx', color: '#ff0000' },
                                        { field: 'countServerUnavailableRows', label: '0', color: 'gray' }
                                       ]">
        </repartition-cross-table>
    </div>
    <div class="mat-elevation-z5" style="display: flex; align-items: stretch; gap: 10px;">
        <performance-card style="width: 70%; display: flex; flex-direction: column;"
                          [data]="$timeAndTypeResponse.data"
                          [isLoading]="$timeAndTypeResponse.loading"
                          [group]="params?.optional.group">

        </performance-card>
        <mat-divider vertical ></mat-divider>
        <repartition-cross-table style="width: 30%; display: flex; flex-direction: column;"
                                 [data]="$timeAndTypeResponseCross.data"
                                 [isLoading]="$timeAndTypeResponseCross.loading"
                                 [columns]="[
                                        { field: params?.optional?.group, header: 'Nom'},
                                        { field: 'name', header: 'Name' }
                                     ]"
                                 [segments]="[
                                            { field: 'elapsedTimeFastest', label: 'Fastest', color: '#81D4FA' },
                                            { field: 'elapsedTimeFast', label: 'Fast', color: '#82C0DC' },
                                            { field: 'elapsedTimeMedium', label: 'Medium', color: '#83ACBF' },
                                            { field: 'elapsedTimeSlow', label: 'Slow', color: '#8397A1' },
                                            { field: 'elapsedTimeSlowest', label: 'Slowest', color: '#848383' }
                                          ]">
        </repartition-cross-table>
    </div>

    <div class="mat-elevation-z5" style="display: flex; align-items: stretch; gap: 10px;">
        <repartition-size-card style="width: 70%; display: flex; flex-direction: column;"
                               [data]="$timeAndTypeResponse.data"
                               [isLoading]="$timeAndTypeResponse.loading"
                               [group]="params?.optional.group">

        </repartition-size-card>
        <mat-divider vertical ></mat-divider>
        <repartition-cross-table style="width: 30%; display: flex; flex-direction: column;"
                                 [data]="$timeAndTypeResponseCross.data"
                                 [isLoading]="$timeAndTypeResponseCross.loading"
                                 [columns]="[
                                        { field: params?.optional?.group, header: 'Nom'},
                                        { field: 'name', header: 'Name' }
                                     ]"
                                 [segments]="[
                                            {  field:'sizeIn', label: 'Size In', color: '#4DB6AC' },
                                            {  field:'sizeOut', label: 'Size Out', color: '#014e48' }
                                          ]">
        </repartition-cross-table>
    </div>

    <div  class="mat-elevation-z5" style="display: flex; align-items: stretch; gap: 10px;">
        <latency-card-http style="width: 70%; display: flex; flex-direction: column;"
                           [data]="$latencyTypeResponse.data"
                           [isLoading]="$latencyTypeResponse.loading"
                           [group]="params?.optional.group">

        </latency-card-http>
        <mat-divider vertical ></mat-divider>
        <repartition-cross-table style="width: 30%; display: flex; flex-direction: column;"
                                 [data]="$latencyTypeResponseCross.data"
                                 [isLoading]="$latencyTypeResponseCross.loading"
                                 [columns]="[
                                        { field: params?.optional?.group, header: 'Nom'},
                                        { field: 'name', header: 'Name' }
                                     ]"
                                 [segments]="[
                                            { field: 'elapsedtime', label: 'Avg', color: '#2196F3' },
                                          ]">
        </repartition-cross-table>
    </div>

    <div  class="mat-elevation-z5" style="display: flex; align-items: stretch; gap: 10px;">
        <dynamic-table style="width: 70%;"
                       [columns]="[
        { field: params?.optional?.group, header: 'Nom', width: '30%' },
        { field: 'errorType', header: 'Status' },
        { field: 'count', header: 'Total', width: '15%' }
    ]"
                       [data]="$exceptionsResponse.data"
                       [isLoading]="$exceptionsResponse.loading"
                       [pageSize]="5">
        </dynamic-table>
        <mat-divider vertical ></mat-divider>
        <dynamic-table style="width: 30%;"
                       [columns]="[
                            { field: params?.optional?.group, header: 'Nom', width: '30%' },
                            { field: 'name', header: 'Nom', width: '30%' },
                            { field: 'errorType', header: 'Status' },
                            { field: 'count', header: 'Total', width: '15%' }
                        ]"
                       [data]="$exceptionsResponseCross.data"
                       [isLoading]="$exceptionsResponseCross.loading"
                       [pageSize]="5">
        </dynamic-table>
    </div>
</div>
