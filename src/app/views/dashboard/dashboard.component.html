<div class="mat-elevation-z5">
    <table class="fullwidth" mat-table [dataSource]="dataSource" matSort matSortActive="start" matSortDirection="desc">

        <ng-container matColumnDef="user">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Client </th>
            <td mat-cell *matCellDef="let row"> {{row.instanceUser || 'N/A'}} </td>
          </ng-container>

      <ng-container matColumnDef="start">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Début</th>
        <td mat-cell *matCellDef="let row">
          {{ row.start*1000 | date:'dd/MM/yyyy' }}
          <br>
          {{ row.start*1000 | date:'HH:mm:ss.SSS' }}
        </td>
      </ng-container>


      <ng-container matColumnDef="durée">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Durée</th>
        <td mat-cell *matCellDef="let row">
          <div
            [matTooltip]="(row.start*1000| date:'dd/MM/yyyy, HH:mm:ss.SSS':'fr') +' | '+ row.inDataSize +'ko ↑ \n '+ (row.end*1000 | date:'dd/MM/yyyy, HH:mm:ss.SSS':'fr')+' | '+ row?.outDataSize +'ko ↓' "
            matTooltipClass="mat-tooltip">{{ getElapsedTime(row.end, row.start) | number :'1.2-3'}}s</div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectedRequest($event,row.id)"></tr>
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="7">
          <div *ngIf="!isLoading"  class="empty-row" style="align-items: center;">
            <span class="material-symbols-outlined" >
              info
            </span>
            <span style="font-style: italic;">Aucun résultat</span>
          </div>
          <div *ngIf="isLoading" class="loading-row">
              <span style="display: flex; flex-direction: column; font-style: italic;">
                Chargement en cours...
                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
              </span>
          </div>
          
        </td>
      </tr>
    </table>
  </div>