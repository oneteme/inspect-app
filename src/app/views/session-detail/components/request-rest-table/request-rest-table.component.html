<div style="display: flex; justify-content: space-between; margin-bottom: 0.2em;">
    <mat-form-field appearance="outline" class="searchwidth md-2 no-subscript">
        <input matInput #input (keyup)="applyFilter($event)" placeholder="Filtrer..."
            autocomplete="off">
        <mat-icon matSuffix>search</mat-icon>
    </mat-form-field>

    <mat-button-toggle-group #group="matButtonToggleGroup" multiple
        (change)="toggleFilter($event.value)">
        <mat-button-toggle value="2xx" matTooltip="2xx">
            <span class="material-symbols-outlined" style="color: #22bb33;">
                done
            </span>
        </mat-button-toggle>
        <mat-button-toggle value="4xx" matTooltip="4xx">
            <span class="material-symbols-outlined" style="color: #f9ad4e;">
                error
            </span>
        </mat-button-toggle>
        <mat-button-toggle value="5xx" matTooltip="5xx">
            <span class="material-symbols-outlined" style="color: #bb2124;">
                warning
            </span>
        </mat-button-toggle>
    </mat-button-toggle-group>
</div>
<div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" #sort="matSort" matSort
        matSortActive="date_debut" matSortDirection="desc">


        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef style="width:1%">
            </th>
            <td [ngStyle]="statusBorder(element['status'])" mat-cell *matCellDef="let element"
                [matTooltip]="element['status']" matTooltipPosition="before">
            </td>
        </ng-container>

        <ng-container matColumnDef="host">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="padding:0"> Hôte</th>
            <td mat-cell *matCellDef="let element">
                {{element['host']}}:<span *ngIf="element['port'] != 0">{{element['port']}}</span>
            </td>
        </ng-container>

        <ng-container matColumnDef="path">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> API </th>
            <td mat-cell *matCellDef="let element">
                <span [ngStyle]="{'color': element.protocol=='https' ? 'green':'gray'}">[{{element.method}}] </span>
                <br>
                {{element['path']}}
            </td>
        </ng-container>

        <ng-container matColumnDef="start">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Début</th>
            <td mat-cell *matCellDef="let element">
                <div class="table-column-content">
                    {{ (element.start*1000 |date:'dd/MM/yyyy')}}
                </div>
                <br>
                <div class="table-column-content">
                    {{ (element.start*1000 |date:'HH:mm:ss.SSS')}}
                </div>
            </td>
        </ng-container>

        <ng-container matColumnDef="duree">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="center-text"> Durée </th>
            <td mat-cell *matCellDef="let element" class="center-text">
                <span
                    [matTooltip]="(element.start * 1000| date:'dd/MM/yyyy, HH:mm:ss.SSS':'fr') +' \n '+ (element.end * 1000 | date:'dd/MM/yyyy, HH:mm:ss.SSS':'fr')  "
                    matTooltipClass="mat-tooltip">
                    {{getElapsedTime(element.end,element.start)| number :'1.2-3' }}s
                </span>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns;"></tr>
        <tr mat-row *matRowDef="let row;columns: displayedColumns;"
            (click)="selectedRequest($event, row.id)">
        </tr>
        <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="7">
                <div class="empty-row" style="align-items: center;">
                    <span class="material-symbols-outlined">
                        info
                    </span>
                    <span style="font-style: italic;">Aucun résultat</span>
                </div>
            </td>
        </tr>
    </table>
    <mat-paginator #paginator [pageSize]="3"
        [pageSizeOptions]="[3, 5, 10, 20]"
        showFirstLastButtons></mat-paginator>
</div>